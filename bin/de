#!/usr/bin/env bash

set -efu

if [[ -n "${1:-}" ]]; then
    chdir="$1"; shift
else
    exec def
fi

cd "$chdir"

if [[ -n "${1:-}" ]]; then
    eval "$(direnv hook bash)"
    direnv allow
    _direnv_hook
    exec "$@"
fi
