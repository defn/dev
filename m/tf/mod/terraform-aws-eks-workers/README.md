<!-- BEGIN_TF_DOCS -->

## Requirements

| Name                                                                     | Version |
| ------------------------------------------------------------------------ | ------- |
| <a name="requirement_terraform"></a> [terraform](#requirement_terraform) | >= 0.13 |
| <a name="requirement_aws"></a> [aws](#requirement_aws)                   | >= 2.0  |
| <a name="requirement_template"></a> [template](#requirement_template)    | >= 2.0  |

## Providers

| Name                                                            | Version |
| --------------------------------------------------------------- | ------- |
| <a name="provider_aws"></a> [aws](#provider_aws)                | >= 2.0  |
| <a name="provider_template"></a> [template](#provider_template) | >= 2.0  |

## Modules

| Name                                                                             | Source                               | Version |
| -------------------------------------------------------------------------------- | ------------------------------------ | ------- |
| <a name="module_autoscale_group"></a> [autoscale_group](#module_autoscale_group) | ../terraform-aws-ec2-autoscale-group | n/a     |
| <a name="module_label"></a> [label](#module_label)                               | cloudposse/label/null                | 0.24.1  |
| <a name="module_this"></a> [this](#module_this)                                  | cloudposse/label/null                | 0.24.1  |

## Resources

| Name                                                                                                                                                                                  | Type        |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------- |
| [aws_iam_instance_profile.default](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_instance_profile)                                                  | resource    |
| [aws_iam_role.default](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role)                                                                          | resource    |
| [aws_iam_role_policy_attachment.amazon_ec2_container_registry_read_only](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role_policy_attachment)      | resource    |
| [aws_iam_role_policy_attachment.amazon_eks_cni_policy](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role_policy_attachment)                        | resource    |
| [aws_iam_role_policy_attachment.amazon_eks_worker_node_policy](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role_policy_attachment)                | resource    |
| [aws_iam_role_policy_attachment.existing_policies_attach_to_eks_workers_role](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role_policy_attachment) | resource    |
| [aws_security_group.default](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group)                                                              | resource    |
| [aws_security_group_rule.egress](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group_rule)                                                     | resource    |
| [aws_security_group_rule.ingress_cidr_blocks](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group_rule)                                        | resource    |
| [aws_security_group_rule.ingress_cluster](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group_rule)                                            | resource    |
| [aws_security_group_rule.ingress_security_groups](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group_rule)                                    | resource    |
| [aws_security_group_rule.ingress_self](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group_rule)                                               | resource    |
| [aws_ami.eks_worker](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/ami)                                                                              | data source |
| [aws_iam_instance_profile.default](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_instance_profile)                                               | data source |
| [aws_iam_policy_document.assume_role](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document)                                             | data source |
| [template_file.userdata](https://registry.terraform.io/providers/hashicorp/template/latest/docs/data-sources/file)                                                                    | data source |

## Inputs

| Name                                                                                                                                                   | Description                                                                                                                                                                                                                                                                                                                                                         | Type                                                                                                                                                                                                                                                                                                                                                                                                            | Default                                                                                                                                                                                                                                                                                                                                                              | Required |
| ------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------: |
| <a name="input_additional_security_group_ids"></a> [additional_security_group_ids](#input_additional_security_group_ids)                               | Additional list of security groups that will be attached to the autoscaling group                                                                                                                                                                                                                                                                                   | `list(string)`                                                                                                                                                                                                                                                                                                                                                                                                  | `[]`                                                                                                                                                                                                                                                                                                                                                                 |    no    |
| <a name="input_additional_tag_map"></a> [additional_tag_map](#input_additional_tag_map)                                                                | Additional tags for appending to tags_as_list_of_maps. Not added to `tags`.                                                                                                                                                                                                                                                                                         | `map(string)`                                                                                                                                                                                                                                                                                                                                                                                                   | `{}`                                                                                                                                                                                                                                                                                                                                                                 |    no    |
| <a name="input_after_cluster_joining_userdata"></a> [after_cluster_joining_userdata](#input_after_cluster_joining_userdata)                            | Additional commands to execute on each worker node after joining the EKS cluster (after executing the `bootstrap.sh` script). For mot info, see https://kubedex.com/90-days-of-aws-eks-in-production                                                                                                                                                                | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `""`                                                                                                                                                                                                                                                                                                                                                                 |    no    |
| <a name="input_allowed_cidr_blocks"></a> [allowed_cidr_blocks](#input_allowed_cidr_blocks)                                                             | List of CIDR blocks to be allowed to connect to the worker nodes                                                                                                                                                                                                                                                                                                    | `list(string)`                                                                                                                                                                                                                                                                                                                                                                                                  | `[]`                                                                                                                                                                                                                                                                                                                                                                 |    no    |
| <a name="input_allowed_security_groups"></a> [allowed_security_groups](#input_allowed_security_groups)                                                 | List of Security Group IDs to be allowed to connect to the worker nodes                                                                                                                                                                                                                                                                                             | `list(string)`                                                                                                                                                                                                                                                                                                                                                                                                  | `[]`                                                                                                                                                                                                                                                                                                                                                                 |    no    |
| <a name="input_associate_public_ip_address"></a> [associate_public_ip_address](#input_associate_public_ip_address)                                     | Associate a public IP address with an instance in a VPC                                                                                                                                                                                                                                                                                                             | `bool`                                                                                                                                                                                                                                                                                                                                                                                                          | `false`                                                                                                                                                                                                                                                                                                                                                              |    no    |
| <a name="input_attributes"></a> [attributes](#input_attributes)                                                                                        | Additional attributes (e.g. `1`)                                                                                                                                                                                                                                                                                                                                    | `list(string)`                                                                                                                                                                                                                                                                                                                                                                                                  | `[]`                                                                                                                                                                                                                                                                                                                                                                 |    no    |
| <a name="input_autoscaling_group_tags"></a> [autoscaling_group_tags](#input_autoscaling_group_tags)                                                    | Additional tags only for the autoscaling group, e.g. "k8s.io/cluster-autoscaler/node-template/taint/dedicated" = "ci-cd:NoSchedule".                                                                                                                                                                                                                                | `map(string)`                                                                                                                                                                                                                                                                                                                                                                                                   | `{}`                                                                                                                                                                                                                                                                                                                                                                 |    no    |
| <a name="input_autoscaling_policies_enabled"></a> [autoscaling_policies_enabled](#input_autoscaling_policies_enabled)                                  | Whether to create `aws_autoscaling_policy` and `aws_cloudwatch_metric_alarm` resources to control Auto Scaling                                                                                                                                                                                                                                                      | `bool`                                                                                                                                                                                                                                                                                                                                                                                                          | `true`                                                                                                                                                                                                                                                                                                                                                               |    no    |
| <a name="input_aws_iam_instance_profile_name"></a> [aws_iam_instance_profile_name](#input_aws_iam_instance_profile_name)                               | The name of the existing instance profile that will be used in autoscaling group for EKS workers. If empty will create a new instance profile.                                                                                                                                                                                                                      | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `""`                                                                                                                                                                                                                                                                                                                                                                 |    no    |
| <a name="input_before_cluster_joining_userdata"></a> [before_cluster_joining_userdata](#input_before_cluster_joining_userdata)                         | Additional commands to execute on each worker node before joining the EKS cluster (before executing the `bootstrap.sh` script). For mot info, see https://kubedex.com/90-days-of-aws-eks-in-production                                                                                                                                                              | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `""`                                                                                                                                                                                                                                                                                                                                                                 |    no    |
| <a name="input_block_device_mappings"></a> [block_device_mappings](#input_block_device_mappings)                                                       | Specify volumes to attach to the instance besides the volumes specified by the AMI                                                                                                                                                                                                                                                                                  | <pre>list(object({<br> device_name = string<br> no_device = bool<br> virtual_name = string<br> ebs = object({<br> delete_on_termination = bool<br> encrypted = bool<br> iops = number<br> kms_key_id = string<br> snapshot_id = string<br> volume_size = number<br> volume_type = string<br> })<br> }))</pre>                                                                                                   | `[]`                                                                                                                                                                                                                                                                                                                                                                 |    no    |
| <a name="input_bootstrap_extra_args"></a> [bootstrap_extra_args](#input_bootstrap_extra_args)                                                          | Extra arguments to the `bootstrap.sh` script to enable `--enable-docker-bridge` or `--use-max-pods`                                                                                                                                                                                                                                                                 | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `""`                                                                                                                                                                                                                                                                                                                                                                 |    no    |
| <a name="input_cluster_certificate_authority_data"></a> [cluster_certificate_authority_data](#input_cluster_certificate_authority_data)                | The base64 encoded certificate data required to communicate with the cluster                                                                                                                                                                                                                                                                                        | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | n/a                                                                                                                                                                                                                                                                                                                                                                  |   yes    |
| <a name="input_cluster_endpoint"></a> [cluster_endpoint](#input_cluster_endpoint)                                                                      | EKS cluster endpoint                                                                                                                                                                                                                                                                                                                                                | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | n/a                                                                                                                                                                                                                                                                                                                                                                  |   yes    |
| <a name="input_cluster_name"></a> [cluster_name](#input_cluster_name)                                                                                  | The name of the EKS cluster                                                                                                                                                                                                                                                                                                                                         | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | n/a                                                                                                                                                                                                                                                                                                                                                                  |   yes    |
| <a name="input_cluster_security_group_id"></a> [cluster_security_group_id](#input_cluster_security_group_id)                                           | Security Group ID of the EKS cluster                                                                                                                                                                                                                                                                                                                                | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | n/a                                                                                                                                                                                                                                                                                                                                                                  |   yes    |
| <a name="input_cluster_security_group_ingress_enabled"></a> [cluster_security_group_ingress_enabled](#input_cluster_security_group_ingress_enabled)    | Whether to enable the EKS cluster Security Group as ingress to workers Security Group                                                                                                                                                                                                                                                                               | `bool`                                                                                                                                                                                                                                                                                                                                                                                                          | `true`                                                                                                                                                                                                                                                                                                                                                               |    no    |
| <a name="input_context"></a> [context](#input_context)                                                                                                 | Single object for setting entire context at once.<br>See description of individual variables for details.<br>Leave string and numeric variables as `null` to use default value.<br>Individual variable settings (non-null) override settings in context object,<br>except for attributes, tags, and additional_tag_map, which are merged.                           | `any`                                                                                                                                                                                                                                                                                                                                                                                                           | <pre>{<br> "additional_tag_map": {},<br> "attributes": [],<br> "delimiter": null,<br> "enabled": true,<br> "environment": null,<br> "id_length_limit": null,<br> "label_key_case": null,<br> "label_order": [],<br> "label_value_case": null,<br> "name": null,<br> "namespace": null,<br> "regex_replace_chars": null,<br> "stage": null,<br> "tags": {}<br>}</pre> |    no    |
| <a name="input_cpu_utilization_high_evaluation_periods"></a> [cpu_utilization_high_evaluation_periods](#input_cpu_utilization_high_evaluation_periods) | The number of periods over which data is compared to the specified threshold                                                                                                                                                                                                                                                                                        | `number`                                                                                                                                                                                                                                                                                                                                                                                                        | `2`                                                                                                                                                                                                                                                                                                                                                                  |    no    |
| <a name="input_cpu_utilization_high_period_seconds"></a> [cpu_utilization_high_period_seconds](#input_cpu_utilization_high_period_seconds)             | The period in seconds over which the specified statistic is applied                                                                                                                                                                                                                                                                                                 | `number`                                                                                                                                                                                                                                                                                                                                                                                                        | `300`                                                                                                                                                                                                                                                                                                                                                                |    no    |
| <a name="input_cpu_utilization_high_statistic"></a> [cpu_utilization_high_statistic](#input_cpu_utilization_high_statistic)                            | The statistic to apply to the alarm's associated metric. Either of the following is supported: `SampleCount`, `Average`, `Sum`, `Minimum`, `Maximum`                                                                                                                                                                                                                | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `"Average"`                                                                                                                                                                                                                                                                                                                                                          |    no    |
| <a name="input_cpu_utilization_high_threshold_percent"></a> [cpu_utilization_high_threshold_percent](#input_cpu_utilization_high_threshold_percent)    | The value against which the specified statistic is compared                                                                                                                                                                                                                                                                                                         | `number`                                                                                                                                                                                                                                                                                                                                                                                                        | `90`                                                                                                                                                                                                                                                                                                                                                                 |    no    |
| <a name="input_cpu_utilization_low_evaluation_periods"></a> [cpu_utilization_low_evaluation_periods](#input_cpu_utilization_low_evaluation_periods)    | The number of periods over which data is compared to the specified threshold                                                                                                                                                                                                                                                                                        | `number`                                                                                                                                                                                                                                                                                                                                                                                                        | `2`                                                                                                                                                                                                                                                                                                                                                                  |    no    |
| <a name="input_cpu_utilization_low_period_seconds"></a> [cpu_utilization_low_period_seconds](#input_cpu_utilization_low_period_seconds)                | The period in seconds over which the specified statistic is applied                                                                                                                                                                                                                                                                                                 | `number`                                                                                                                                                                                                                                                                                                                                                                                                        | `300`                                                                                                                                                                                                                                                                                                                                                                |    no    |
| <a name="input_cpu_utilization_low_statistic"></a> [cpu_utilization_low_statistic](#input_cpu_utilization_low_statistic)                               | The statistic to apply to the alarm's associated metric. Either of the following is supported: `SampleCount`, `Average`, `Sum`, `Minimum`, `Maximum`                                                                                                                                                                                                                | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `"Average"`                                                                                                                                                                                                                                                                                                                                                          |    no    |
| <a name="input_cpu_utilization_low_threshold_percent"></a> [cpu_utilization_low_threshold_percent](#input_cpu_utilization_low_threshold_percent)       | The value against which the specified statistic is compared                                                                                                                                                                                                                                                                                                         | `number`                                                                                                                                                                                                                                                                                                                                                                                                        | `10`                                                                                                                                                                                                                                                                                                                                                                 |    no    |
| <a name="input_credit_specification"></a> [credit_specification](#input_credit_specification)                                                          | Customize the credit specification of the instances                                                                                                                                                                                                                                                                                                                 | <pre>object({<br> cpu_credits = string<br> })</pre>                                                                                                                                                                                                                                                                                                                                                             | `null`                                                                                                                                                                                                                                                                                                                                                               |    no    |
| <a name="input_default_cooldown"></a> [default_cooldown](#input_default_cooldown)                                                                      | The amount of time, in seconds, after a scaling activity completes before another scaling activity can start                                                                                                                                                                                                                                                        | `number`                                                                                                                                                                                                                                                                                                                                                                                                        | `300`                                                                                                                                                                                                                                                                                                                                                                |    no    |
| <a name="input_delimiter"></a> [delimiter](#input_delimiter)                                                                                           | Delimiter to be used between `namespace`, `environment`, `stage`, `name` and `attributes`.<br>Defaults to `-` (hyphen). Set to `""` to use no delimiter at all.                                                                                                                                                                                                     | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `null`                                                                                                                                                                                                                                                                                                                                                               |    no    |
| <a name="input_disable_api_termination"></a> [disable_api_termination](#input_disable_api_termination)                                                 | If `true`, enables EC2 Instance Termination Protection                                                                                                                                                                                                                                                                                                              | `bool`                                                                                                                                                                                                                                                                                                                                                                                                          | `false`                                                                                                                                                                                                                                                                                                                                                              |    no    |
| <a name="input_ebs_optimized"></a> [ebs_optimized](#input_ebs_optimized)                                                                               | If true, the launched EC2 instance will be EBS-optimized                                                                                                                                                                                                                                                                                                            | `bool`                                                                                                                                                                                                                                                                                                                                                                                                          | `false`                                                                                                                                                                                                                                                                                                                                                              |    no    |
| <a name="input_eks_worker_ami_name_filter"></a> [eks_worker_ami_name_filter](#input_eks_worker_ami_name_filter)                                        | AMI name filter to lookup the most recent EKS AMI if `image_id` is not provided                                                                                                                                                                                                                                                                                     | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `"amazon-eks-node-*"`                                                                                                                                                                                                                                                                                                                                                |    no    |
| <a name="input_eks_worker_ami_name_regex"></a> [eks_worker_ami_name_regex](#input_eks_worker_ami_name_regex)                                           | A regex string to apply to the AMI list returned by AWS                                                                                                                                                                                                                                                                                                             | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `"^amazon-eks-node-[1-9,.]+-v[0-9]{8}$"`                                                                                                                                                                                                                                                                                                                             |    no    |
| <a name="input_elastic_gpu_specifications"></a> [elastic_gpu_specifications](#input_elastic_gpu_specifications)                                        | Specifications of Elastic GPU to attach to the instances                                                                                                                                                                                                                                                                                                            | <pre>object({<br> type = string<br> })</pre>                                                                                                                                                                                                                                                                                                                                                                    | `null`                                                                                                                                                                                                                                                                                                                                                               |    no    |
| <a name="input_enable_monitoring"></a> [enable_monitoring](#input_enable_monitoring)                                                                   | Enable/disable detailed monitoring                                                                                                                                                                                                                                                                                                                                  | `bool`                                                                                                                                                                                                                                                                                                                                                                                                          | `true`                                                                                                                                                                                                                                                                                                                                                               |    no    |
| <a name="input_enabled"></a> [enabled](#input_enabled)                                                                                                 | Set to false to prevent the module from creating any resources                                                                                                                                                                                                                                                                                                      | `bool`                                                                                                                                                                                                                                                                                                                                                                                                          | `null`                                                                                                                                                                                                                                                                                                                                                               |    no    |
| <a name="input_enabled_metrics"></a> [enabled_metrics](#input_enabled_metrics)                                                                         | A list of metrics to collect. The allowed values are `GroupMinSize`, `GroupMaxSize`, `GroupDesiredCapacity`, `GroupInServiceInstances`, `GroupPendingInstances`, `GroupStandbyInstances`, `GroupTerminatingInstances`, `GroupTotalInstances`                                                                                                                        | `list(string)`                                                                                                                                                                                                                                                                                                                                                                                                  | <pre>[<br> "GroupMinSize",<br> "GroupMaxSize",<br> "GroupDesiredCapacity",<br> "GroupInServiceInstances",<br> "GroupPendingInstances",<br> "GroupStandbyInstances",<br> "GroupTerminatingInstances",<br> "GroupTotalInstances"<br>]</pre>                                                                                                                            |    no    |
| <a name="input_environment"></a> [environment](#input_environment)                                                                                     | Environment, e.g. 'uw2', 'us-west-2', OR 'prod', 'staging', 'dev', 'UAT'                                                                                                                                                                                                                                                                                            | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `null`                                                                                                                                                                                                                                                                                                                                                               |    no    |
| <a name="input_force_delete"></a> [force_delete](#input_force_delete)                                                                                  | Allows deleting the autoscaling group without waiting for all instances in the pool to terminate. You can force an autoscaling group to delete even if it's in the process of scaling a resource. Normally, Terraform drains all the instances before deleting the group. This bypasses that behavior and potentially leaves resources dangling                     | `bool`                                                                                                                                                                                                                                                                                                                                                                                                          | `false`                                                                                                                                                                                                                                                                                                                                                              |    no    |
| <a name="input_health_check_grace_period"></a> [health_check_grace_period](#input_health_check_grace_period)                                           | Time (in seconds) after instance comes into service before checking health                                                                                                                                                                                                                                                                                          | `number`                                                                                                                                                                                                                                                                                                                                                                                                        | `300`                                                                                                                                                                                                                                                                                                                                                                |    no    |
| <a name="input_health_check_type"></a> [health_check_type](#input_health_check_type)                                                                   | Controls how health checking is done. Valid values are `EC2` or `ELB`                                                                                                                                                                                                                                                                                               | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `"EC2"`                                                                                                                                                                                                                                                                                                                                                              |    no    |
| <a name="input_id_length_limit"></a> [id_length_limit](#input_id_length_limit)                                                                         | Limit `id` to this many characters (minimum 6).<br>Set to `0` for unlimited length.<br>Set to `null` for default, which is `0`.<br>Does not affect `id_full`.                                                                                                                                                                                                       | `number`                                                                                                                                                                                                                                                                                                                                                                                                        | `null`                                                                                                                                                                                                                                                                                                                                                               |    no    |
| <a name="input_image_id"></a> [image_id](#input_image_id)                                                                                              | EC2 image ID to launch. If not provided, the module will lookup the most recent EKS AMI. See https://docs.aws.amazon.com/eks/latest/userguide/eks-optimized-ami.html for more details on EKS-optimized images                                                                                                                                                       | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `""`                                                                                                                                                                                                                                                                                                                                                                 |    no    |
| <a name="input_instance_initiated_shutdown_behavior"></a> [instance_initiated_shutdown_behavior](#input_instance_initiated_shutdown_behavior)          | Shutdown behavior for the instances. Can be `stop` or `terminate`                                                                                                                                                                                                                                                                                                   | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `"terminate"`                                                                                                                                                                                                                                                                                                                                                        |    no    |
| <a name="input_instance_market_options"></a> [instance_market_options](#input_instance_market_options)                                                 | The market (purchasing) option for the instances                                                                                                                                                                                                                                                                                                                    | <pre>object({<br> market_type = string<br> spot_options = object({<br> block_duration_minutes = number<br> instance_interruption_behavior = string<br> max_price = number<br> spot_instance_type = string<br> valid_until = string<br> })<br> })</pre>                                                                                                                                                          | `null`                                                                                                                                                                                                                                                                                                                                                               |    no    |
| <a name="input_instance_type"></a> [instance_type](#input_instance_type)                                                                               | Instance type to launch                                                                                                                                                                                                                                                                                                                                             | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | n/a                                                                                                                                                                                                                                                                                                                                                                  |   yes    |
| <a name="input_key_name"></a> [key_name](#input_key_name)                                                                                              | SSH key name that should be used for the instance                                                                                                                                                                                                                                                                                                                   | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `""`                                                                                                                                                                                                                                                                                                                                                                 |    no    |
| <a name="input_kubelet_extra_args"></a> [kubelet_extra_args](#input_kubelet_extra_args)                                                                | Extra arguments to pass to kubelet, like "--register-with-taints=dedicated=ci-cd:NoSchedule --node-labels=purpose=ci-worker"                                                                                                                                                                                                                                        | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `""`                                                                                                                                                                                                                                                                                                                                                                 |    no    |
| <a name="input_label_key_case"></a> [label_key_case](#input_label_key_case)                                                                            | The letter case of label keys (`tag` names) (i.e. `name`, `namespace`, `environment`, `stage`, `attributes`) to use in `tags`.<br>Possible values: `lower`, `title`, `upper`.<br>Default value: `title`.                                                                                                                                                            | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `null`                                                                                                                                                                                                                                                                                                                                                               |    no    |
| <a name="input_label_order"></a> [label_order](#input_label_order)                                                                                     | The naming order of the id output and Name tag.<br>Defaults to ["namespace", "environment", "stage", "name", "attributes"].<br>You can omit any of the 5 elements, but at least one must be present.                                                                                                                                                                | `list(string)`                                                                                                                                                                                                                                                                                                                                                                                                  | `null`                                                                                                                                                                                                                                                                                                                                                               |    no    |
| <a name="input_label_value_case"></a> [label_value_case](#input_label_value_case)                                                                      | The letter case of output label values (also used in `tags` and `id`).<br>Possible values: `lower`, `title`, `upper` and `none` (no transformation).<br>Default value: `lower`.                                                                                                                                                                                     | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `null`                                                                                                                                                                                                                                                                                                                                                               |    no    |
| <a name="input_load_balancers"></a> [load_balancers](#input_load_balancers)                                                                            | A list of elastic load balancer names to add to the autoscaling group. Only valid for classic load balancers. For ALBs, use `target_group_arns` instead                                                                                                                                                                                                             | `list(string)`                                                                                                                                                                                                                                                                                                                                                                                                  | `[]`                                                                                                                                                                                                                                                                                                                                                                 |    no    |
| <a name="input_max_size"></a> [max_size](#input_max_size)                                                                                              | The maximum size of the autoscale group                                                                                                                                                                                                                                                                                                                             | `number`                                                                                                                                                                                                                                                                                                                                                                                                        | n/a                                                                                                                                                                                                                                                                                                                                                                  |   yes    |
| <a name="input_metadata_http_endpoint_enabled"></a> [metadata_http_endpoint_enabled](#input_metadata_http_endpoint_enabled)                            | Set false to disable the Instance Metadata Service.                                                                                                                                                                                                                                                                                                                 | `bool`                                                                                                                                                                                                                                                                                                                                                                                                          | `true`                                                                                                                                                                                                                                                                                                                                                               |    no    |
| <a name="input_metadata_http_put_response_hop_limit"></a> [metadata_http_put_response_hop_limit](#input_metadata_http_put_response_hop_limit)          | The desired HTTP PUT response hop limit (between 1 and 64) for Instance Metadata Service requests.<br>The default is `2` to support containerized workloads.                                                                                                                                                                                                        | `number`                                                                                                                                                                                                                                                                                                                                                                                                        | `2`                                                                                                                                                                                                                                                                                                                                                                  |    no    |
| <a name="input_metadata_http_tokens_required"></a> [metadata_http_tokens_required](#input_metadata_http_tokens_required)                               | Set true to require IMDS session tokens, disabling Instance Metadata Service Version 1.                                                                                                                                                                                                                                                                             | `bool`                                                                                                                                                                                                                                                                                                                                                                                                          | `true`                                                                                                                                                                                                                                                                                                                                                               |    no    |
| <a name="input_metrics_granularity"></a> [metrics_granularity](#input_metrics_granularity)                                                             | The granularity to associate with the metrics to collect. The only valid value is 1Minute                                                                                                                                                                                                                                                                           | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `"1Minute"`                                                                                                                                                                                                                                                                                                                                                          |    no    |
| <a name="input_min_elb_capacity"></a> [min_elb_capacity](#input_min_elb_capacity)                                                                      | Setting this causes Terraform to wait for this number of instances to show up healthy in the ELB only on creation. Updates will not wait on ELB instance number changes                                                                                                                                                                                             | `number`                                                                                                                                                                                                                                                                                                                                                                                                        | `0`                                                                                                                                                                                                                                                                                                                                                                  |    no    |
| <a name="input_min_size"></a> [min_size](#input_min_size)                                                                                              | The minimum size of the autoscale group                                                                                                                                                                                                                                                                                                                             | `number`                                                                                                                                                                                                                                                                                                                                                                                                        | n/a                                                                                                                                                                                                                                                                                                                                                                  |   yes    |
| <a name="input_mixed_instances_policy"></a> [mixed_instances_policy](#input_mixed_instances_policy)                                                    | policy to used mixed group of on demand/spot of differing types. Launch template is automatically generated. https://www.terraform.io/docs/providers/aws/r/autoscaling_group.html#mixed_instances_policy-1                                                                                                                                                          | <pre>object({<br> instances_distribution = object({<br> on_demand_allocation_strategy = string<br> on_demand_base_capacity = number<br> on_demand_percentage_above_base_capacity = number<br> spot_allocation_strategy = string<br> spot_instance_pools = number<br> spot_max_price = string<br> })<br> override = list(object({<br> instance_type = string<br> weighted_capacity = number<br> }))<br> })</pre> | `null`                                                                                                                                                                                                                                                                                                                                                               |    no    |
| <a name="input_name"></a> [name](#input_name)                                                                                                          | Solution name, e.g. 'app' or 'jenkins'                                                                                                                                                                                                                                                                                                                              | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `null`                                                                                                                                                                                                                                                                                                                                                               |    no    |
| <a name="input_namespace"></a> [namespace](#input_namespace)                                                                                           | Namespace, which could be your organization name or abbreviation, e.g. 'eg' or 'cp'                                                                                                                                                                                                                                                                                 | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `null`                                                                                                                                                                                                                                                                                                                                                               |    no    |
| <a name="input_placement"></a> [placement](#input_placement)                                                                                           | The placement specifications of the instances                                                                                                                                                                                                                                                                                                                       | <pre>object({<br> affinity = string<br> availability_zone = string<br> group_name = string<br> host_id = string<br> tenancy = string<br> })</pre>                                                                                                                                                                                                                                                               | `null`                                                                                                                                                                                                                                                                                                                                                               |    no    |
| <a name="input_placement_group"></a> [placement_group](#input_placement_group)                                                                         | The name of the placement group into which you'll launch your instances, if any                                                                                                                                                                                                                                                                                     | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `""`                                                                                                                                                                                                                                                                                                                                                                 |    no    |
| <a name="input_protect_from_scale_in"></a> [protect_from_scale_in](#input_protect_from_scale_in)                                                       | Allows setting instance protection. The autoscaling group will not select instances with this setting for terminination during scale in events                                                                                                                                                                                                                      | `bool`                                                                                                                                                                                                                                                                                                                                                                                                          | `false`                                                                                                                                                                                                                                                                                                                                                              |    no    |
| <a name="input_regex_replace_chars"></a> [regex_replace_chars](#input_regex_replace_chars)                                                             | Regex to replace chars with empty string in `namespace`, `environment`, `stage` and `name`.<br>If not set, `"/[^a-zA-Z0-9-]/"` is used to remove all characters other than hyphens, letters and digits.                                                                                                                                                             | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `null`                                                                                                                                                                                                                                                                                                                                                               |    no    |
| <a name="input_scale_down_adjustment_type"></a> [scale_down_adjustment_type](#input_scale_down_adjustment_type)                                        | Specifies whether the adjustment is an absolute number or a percentage of the current capacity. Valid values are `ChangeInCapacity`, `ExactCapacity` and `PercentChangeInCapacity`                                                                                                                                                                                  | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `"ChangeInCapacity"`                                                                                                                                                                                                                                                                                                                                                 |    no    |
| <a name="input_scale_down_cooldown_seconds"></a> [scale_down_cooldown_seconds](#input_scale_down_cooldown_seconds)                                     | The amount of time, in seconds, after a scaling activity completes and before the next scaling activity can start                                                                                                                                                                                                                                                   | `number`                                                                                                                                                                                                                                                                                                                                                                                                        | `300`                                                                                                                                                                                                                                                                                                                                                                |    no    |
| <a name="input_scale_down_policy_type"></a> [scale_down_policy_type](#input_scale_down_policy_type)                                                    | The scalling policy type, either `SimpleScaling`, `StepScaling` or `TargetTrackingScaling`                                                                                                                                                                                                                                                                          | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `"SimpleScaling"`                                                                                                                                                                                                                                                                                                                                                    |    no    |
| <a name="input_scale_down_scaling_adjustment"></a> [scale_down_scaling_adjustment](#input_scale_down_scaling_adjustment)                               | The number of instances by which to scale. `scale_down_scaling_adjustment` determines the interpretation of this number (e.g. as an absolute number or as a percentage of the existing Auto Scaling group size). A positive increment adds to the current capacity and a negative value removes from the current capacity                                           | `number`                                                                                                                                                                                                                                                                                                                                                                                                        | `-1`                                                                                                                                                                                                                                                                                                                                                                 |    no    |
| <a name="input_scale_up_adjustment_type"></a> [scale_up_adjustment_type](#input_scale_up_adjustment_type)                                              | Specifies whether the adjustment is an absolute number or a percentage of the current capacity. Valid values are `ChangeInCapacity`, `ExactCapacity` and `PercentChangeInCapacity`                                                                                                                                                                                  | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `"ChangeInCapacity"`                                                                                                                                                                                                                                                                                                                                                 |    no    |
| <a name="input_scale_up_cooldown_seconds"></a> [scale_up_cooldown_seconds](#input_scale_up_cooldown_seconds)                                           | The amount of time, in seconds, after a scaling activity completes and before the next scaling activity can start                                                                                                                                                                                                                                                   | `number`                                                                                                                                                                                                                                                                                                                                                                                                        | `300`                                                                                                                                                                                                                                                                                                                                                                |    no    |
| <a name="input_scale_up_policy_type"></a> [scale_up_policy_type](#input_scale_up_policy_type)                                                          | The scalling policy type, either `SimpleScaling`, `StepScaling` or `TargetTrackingScaling`                                                                                                                                                                                                                                                                          | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `"SimpleScaling"`                                                                                                                                                                                                                                                                                                                                                    |    no    |
| <a name="input_scale_up_scaling_adjustment"></a> [scale_up_scaling_adjustment](#input_scale_up_scaling_adjustment)                                     | The number of instances by which to scale. `scale_up_adjustment_type` determines the interpretation of this number (e.g. as an absolute number or as a percentage of the existing Auto Scaling group size). A positive increment adds to the current capacity and a negative value removes from the current capacity                                                | `number`                                                                                                                                                                                                                                                                                                                                                                                                        | `1`                                                                                                                                                                                                                                                                                                                                                                  |    no    |
| <a name="input_service_linked_role_arn"></a> [service_linked_role_arn](#input_service_linked_role_arn)                                                 | The ARN of the service-linked role that the ASG will use to call other AWS services                                                                                                                                                                                                                                                                                 | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `""`                                                                                                                                                                                                                                                                                                                                                                 |    no    |
| <a name="input_stage"></a> [stage](#input_stage)                                                                                                       | Stage, e.g. 'prod', 'staging', 'dev', OR 'source', 'build', 'test', 'deploy', 'release'                                                                                                                                                                                                                                                                             | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `null`                                                                                                                                                                                                                                                                                                                                                               |    no    |
| <a name="input_subnet_ids"></a> [subnet_ids](#input_subnet_ids)                                                                                        | A list of subnet IDs to launch resources in                                                                                                                                                                                                                                                                                                                         | `list(string)`                                                                                                                                                                                                                                                                                                                                                                                                  | n/a                                                                                                                                                                                                                                                                                                                                                                  |   yes    |
| <a name="input_suspended_processes"></a> [suspended_processes](#input_suspended_processes)                                                             | A list of processes to suspend for the AutoScaling Group. The allowed values are `Launch`, `Terminate`, `HealthCheck`, `ReplaceUnhealthy`, `AZRebalance`, `AlarmNotification`, `ScheduledActions`, `AddToLoadBalancer`. Note that if you suspend either the `Launch` or `Terminate` process types, it can prevent your autoscaling group from functioning properly. | `list(string)`                                                                                                                                                                                                                                                                                                                                                                                                  | `[]`                                                                                                                                                                                                                                                                                                                                                                 |    no    |
| <a name="input_tags"></a> [tags](#input_tags)                                                                                                          | Additional tags (e.g. `map('BusinessUnit','XYZ')`                                                                                                                                                                                                                                                                                                                   | `map(string)`                                                                                                                                                                                                                                                                                                                                                                                                   | `{}`                                                                                                                                                                                                                                                                                                                                                                 |    no    |
| <a name="input_target_group_arns"></a> [target_group_arns](#input_target_group_arns)                                                                   | A list of aws_alb_target_group ARNs, for use with Application Load Balancing                                                                                                                                                                                                                                                                                        | `list(string)`                                                                                                                                                                                                                                                                                                                                                                                                  | `[]`                                                                                                                                                                                                                                                                                                                                                                 |    no    |
| <a name="input_termination_policies"></a> [termination_policies](#input_termination_policies)                                                          | A list of policies to decide how the instances in the auto scale group should be terminated. The allowed values are `OldestInstance`, `NewestInstance`, `OldestLaunchConfiguration`, `ClosestToNextInstanceHour`, `Default`                                                                                                                                         | `list(string)`                                                                                                                                                                                                                                                                                                                                                                                                  | <pre>[<br> "Default"<br>]</pre>                                                                                                                                                                                                                                                                                                                                      |    no    |
| <a name="input_use_custom_image_id"></a> [use_custom_image_id](#input_use_custom_image_id)                                                             | If set to `true`, will use variable `image_id` for the EKS workers inside autoscaling group                                                                                                                                                                                                                                                                         | `bool`                                                                                                                                                                                                                                                                                                                                                                                                          | `false`                                                                                                                                                                                                                                                                                                                                                              |    no    |
| <a name="input_use_existing_aws_iam_instance_profile"></a> [use_existing_aws_iam_instance_profile](#input_use_existing_aws_iam_instance_profile)       | If set to `true`, will use variable `aws_iam_instance_profile_name` to run EKS workers using an existing AWS instance profile that was created outside of this module, workaround for error like `count cannot be computed`                                                                                                                                         | `bool`                                                                                                                                                                                                                                                                                                                                                                                                          | `false`                                                                                                                                                                                                                                                                                                                                                              |    no    |
| <a name="input_use_existing_security_group"></a> [use_existing_security_group](#input_use_existing_security_group)                                     | If set to `true`, will use variable `workers_security_group_id` to run EKS workers using an existing security group that was created outside of this module, workaround for errors like `count cannot be computed`                                                                                                                                                  | `bool`                                                                                                                                                                                                                                                                                                                                                                                                          | `false`                                                                                                                                                                                                                                                                                                                                                              |    no    |
| <a name="input_vpc_id"></a> [vpc_id](#input_vpc_id)                                                                                                    | VPC ID for the EKS cluster                                                                                                                                                                                                                                                                                                                                          | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | n/a                                                                                                                                                                                                                                                                                                                                                                  |   yes    |
| <a name="input_wait_for_capacity_timeout"></a> [wait_for_capacity_timeout](#input_wait_for_capacity_timeout)                                           | A maximum duration that Terraform should wait for ASG instances to be healthy before timing out. Setting this to '0' causes Terraform to skip all Capacity Waiting behavior                                                                                                                                                                                         | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `"10m"`                                                                                                                                                                                                                                                                                                                                                              |    no    |
| <a name="input_wait_for_elb_capacity"></a> [wait_for_elb_capacity](#input_wait_for_elb_capacity)                                                       | Setting this will cause Terraform to wait for exactly this number of healthy instances in all attached load balancers on both create and update operations. Takes precedence over `min_elb_capacity` behavior                                                                                                                                                       | `number`                                                                                                                                                                                                                                                                                                                                                                                                        | `0`                                                                                                                                                                                                                                                                                                                                                                  |    no    |
| <a name="input_workers_role_policy_arns"></a> [workers_role_policy_arns](#input_workers_role_policy_arns)                                              | List of policy ARNs that will be attached to the workers default role on creation                                                                                                                                                                                                                                                                                   | `list(string)`                                                                                                                                                                                                                                                                                                                                                                                                  | `[]`                                                                                                                                                                                                                                                                                                                                                                 |    no    |
| <a name="input_workers_role_policy_arns_count"></a> [workers_role_policy_arns_count](#input_workers_role_policy_arns_count)                            | Count of policy ARNs that will be attached to the workers default role on creation. Needed to prevent Terraform error `count can't be computed`                                                                                                                                                                                                                     | `number`                                                                                                                                                                                                                                                                                                                                                                                                        | `0`                                                                                                                                                                                                                                                                                                                                                                  |    no    |
| <a name="input_workers_security_group_id"></a> [workers_security_group_id](#input_workers_security_group_id)                                           | The name of the existing security group that will be used in autoscaling group for EKS workers. If empty, a new security group will be created                                                                                                                                                                                                                      | `string`                                                                                                                                                                                                                                                                                                                                                                                                        | `""`                                                                                                                                                                                                                                                                                                                                                                 |    no    |

## Outputs

| Name                                                                                                                                                                 | Description                                                            |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------- |
| <a name="output_autoscaling_group_arn"></a> [autoscaling_group_arn](#output_autoscaling_group_arn)                                                                   | ARN of the AutoScaling Group                                           |
| <a name="output_autoscaling_group_default_cooldown"></a> [autoscaling_group_default_cooldown](#output_autoscaling_group_default_cooldown)                            | Time between a scaling activity and the succeeding scaling activity    |
| <a name="output_autoscaling_group_desired_capacity"></a> [autoscaling_group_desired_capacity](#output_autoscaling_group_desired_capacity)                            | The number of Amazon EC2 instances that should be running in the group |
| <a name="output_autoscaling_group_health_check_grace_period"></a> [autoscaling_group_health_check_grace_period](#output_autoscaling_group_health_check_grace_period) | Time after instance comes into service before checking health          |
| <a name="output_autoscaling_group_health_check_type"></a> [autoscaling_group_health_check_type](#output_autoscaling_group_health_check_type)                         | `EC2` or `ELB`. Controls how health checking is done                   |
| <a name="output_autoscaling_group_id"></a> [autoscaling_group_id](#output_autoscaling_group_id)                                                                      | The AutoScaling Group ID                                               |
| <a name="output_autoscaling_group_max_size"></a> [autoscaling_group_max_size](#output_autoscaling_group_max_size)                                                    | The maximum size of the AutoScaling Group                              |
| <a name="output_autoscaling_group_min_size"></a> [autoscaling_group_min_size](#output_autoscaling_group_min_size)                                                    | The minimum size of the AutoScaling Group                              |
| <a name="output_autoscaling_group_name"></a> [autoscaling_group_name](#output_autoscaling_group_name)                                                                | The AutoScaling Group name                                             |
| <a name="output_autoscaling_group_tags"></a> [autoscaling_group_tags](#output_autoscaling_group_tags)                                                                | A list of tag settings associated with the AutoScaling Group           |
| <a name="output_launch_template_arn"></a> [launch_template_arn](#output_launch_template_arn)                                                                         | ARN of the launch template                                             |
| <a name="output_launch_template_id"></a> [launch_template_id](#output_launch_template_id)                                                                            | The ID of the launch template                                          |
| <a name="output_security_group_arn"></a> [security_group_arn](#output_security_group_arn)                                                                            | ARN of the worker nodes Security Group                                 |
| <a name="output_security_group_id"></a> [security_group_id](#output_security_group_id)                                                                               | ID of the worker nodes Security Group                                  |
| <a name="output_security_group_name"></a> [security_group_name](#output_security_group_name)                                                                         | Name of the worker nodes Security Group                                |
| <a name="output_workers_role_arn"></a> [workers_role_arn](#output_workers_role_arn)                                                                                  | ARN of the worker nodes IAM role                                       |
| <a name="output_workers_role_name"></a> [workers_role_name](#output_workers_role_name)                                                                               | Name of the worker nodes IAM role                                      |

<!-- END_TF_DOCS -->
