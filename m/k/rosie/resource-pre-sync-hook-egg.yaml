#ManagedBy: cue

apiVersion: tf.isaaguilar.com/v1alpha2
kind: Terraform
metadata:
  name: rosie-egg
  namespace: default
  annotations:
    argocd.argoproj.io/hook: PreSync
    argocd.argoproj.io/sync-wave: "0"
spec:
  terraformVersion: 1.0.0
  terraformModule:
    source: https://github.com/ppm.git//app/tf/m/egg?ref=main
  taskOptions:
    - for:
        - '*'
      env:
        - name: TF_VAR_egg
          value: rosie
  serviceAccount: default
  scmAuthMethods: []
  ignoreDelete: true
  keepLatestPodsOnly: true
  backend: |-
    terraform {
    	backend "kubernetes" {
    		in_cluster_config = true
    		secret_suffix     = "rosie-egg"
    		namespace         = "default"
    	}
    }
