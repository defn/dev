#ManagedBy: cue

patches:
  - path: patch-service-mastodon-apache.yaml
  - path: patch-job-mastodon-init.yaml
resources:
  - resource-namespace-pihole.yaml
  - resource-ingress-mastodon-apache.yaml
namespace: mastodon
helmCharts:
  - releaseName: mastodon
    name: mastodon
    version: 2.1.3
    repo: https://charts.bitnami.com/bitnami
    namespace: mastodon
    valuesInline:
      initJob:
        createAdmin: true
      adminUser: defn
      adminPassword: adminadmin
      adminEmail: iam@defn.sh
      webDomain: mastodon.dev.amanibhavam.defn.run
      useSecureWebSocket: true
    includeCRDs: true
