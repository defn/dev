# auto-generated: transform.sh
{"id": "545070380609", "account": "org", "org": "immanent", "name": "immanent-org", "email": "aws-immanent@defn.us", "sso_role": "Administrator", "aws_config": "# auto-generated: aws.cue aws_config_account\n[profile immanent-org]\nsso_account_id=545070380609\nsso_role_name=Administrator\nsso_start_url=https://immanent-0.awsapps.com/start\nsso_region=us-west-2\n\n# auto-generated: aws.cue aws_config_bootstrap\n[profile defn-org]\nsso_account_id=510430971399\nsso_role_name=Administrator\nsso_start_url=https://defn.awsapps.com/start\nsso_region=us-east-2", "mise_config": "# auto-generated: aws.cue mise_config\n[env]\nAWS_PROFILE = \"immanent-org\"\nAWS_REGION = \"us-west-2\"\nAWS_CONFIG_FILE = \"/home/ubuntu/m/a/immanent/org/.aws/config\"", "aws_config_account": "# auto-generated: aws.cue aws_config_account\n[profile immanent-org]\nsso_account_id=545070380609\nsso_role_name=Administrator\nsso_start_url=https://immanent-0.awsapps.com/start\nsso_region=us-west-2", "aws_config_bootstrap": "# auto-generated: aws.cue aws_config_bootstrap\n[profile defn-org]\nsso_account_id=510430971399\nsso_role_name=Administrator\nsso_start_url=https://defn.awsapps.com/start\nsso_region=us-east-2", "account_readme": "## AWS Environment: immanent-org\n\n```bash\ncd a/immanent/org\nmise trust\naws sso login\nalogin\n```\n\nauto-generated: aws.cue account_readme", "infra_org_readme": "## Organizational-level Terraform: immanent-org\n\n```bash\ncd infra/org-immanent\nmise trust\naws sso login\nterraform init\nterraform plan\n```\n\nauto-generated: aws.cue infra_org_readme", "infra_org_terraform": "terraform {\n  required_providers {\n    aws = {\n      version = \"5.99.1\"\n      source  = \"aws\"\n    }\n  }\n  backend \"s3\" {\n    bucket         = \"dfn-defn-terraform-state\"\n    dynamodb_table = \"dfn-defn-terraform-state-lock\"\n    encrypt        = true\n    key            = \"stacks/org-immanent/terraform.tfstate\"\n    profile        = \"defn-org\"\n    region         = \"us-east-1\"\n  }\n\n}\n\nlocals {\n  sso_instance_arn  = data.aws_ssoadmin_instances.sso_instance.arns\n  sso_instance_isid = data.aws_ssoadmin_instances.sso_instance.identity_store_ids\n}\n\nprovider \"aws\" {\n  profile = \"immanent-org\"\n  region  = \"us-west-2\"\n}\n\nresource \"aws_organizations_organization\" \"organization\" {\n  aws_service_access_principals = [\n    \"account.amazonaws.com\",\n    \"iam.amazonaws.com\",\n    \"cloudtrail.amazonaws.com\",\n    \"config.amazonaws.com\",\n    \"ram.amazonaws.com\",\n    \"ssm.amazonaws.com\",\n    \"sso.amazonaws.com\",\n    \"tagpolicies.tag.amazonaws.com\"\n  ]\n  enabled_policy_types = [\n    \"SERVICE_CONTROL_POLICY\",\n    \"TAG_POLICY\"\n  ]\n  feature_set = \"ALL\"\n}\n\ndata \"aws_ssoadmin_instances\" \"sso_instance\" {\n}\n\nresource \"aws_ssoadmin_permission_set\" \"admin_sso_permission_set\" {\n  instance_arn     = element(local.sso_instance_arn, 0)\n  name             = \"Administrator\"\n  session_duration = \"PT2H\"\n  tags = {\n    ManagedBy = \"Terraform\"\n  }\n}\n\nresource \"aws_ssoadmin_managed_policy_attachment\" \"admin_sso_managed_policy_attachment\" {\n  instance_arn       = aws_ssoadmin_permission_set.admin_sso_permission_set.instance_arn\n  managed_policy_arn = \"arn:aws:iam::aws:policy/AdministratorAccess\"\n  permission_set_arn = aws_ssoadmin_permission_set.admin_sso_permission_set.arn\n}\n\nresource \"aws_identitystore_group\" \"administrators_sso_group\" {\n  display_name      = \"Administrators\"\n  identity_store_id = element(local.sso_instance_isid, 0)\n}\nresource \"aws_organizations_account\" \"immanent_org\" {\n  email = \"aws-immanent@defn.us\"\n  name  = \"immanent-org\"\n  tags = {\n    ManagedBy = \"Terraform\"\n  }\n}\n\nresource \"aws_ssoadmin_account_assignment\" \"immanent_org_admin_sso_account_assignment\" {\n  instance_arn       = aws_ssoadmin_managed_policy_attachment.admin_sso_managed_policy_attachment.instance_arn\n  permission_set_arn = aws_ssoadmin_managed_policy_attachment.admin_sso_managed_policy_attachment.permission_set_arn\n  principal_id       = aws_identitystore_group.administrators_sso_group.group_id\n  principal_type     = \"GROUP\"\n  target_id          = aws_organizations_account.immanent_org.id\n  target_type        = \"AWS_ACCOUNT\"\n}\nresource \"aws_organizations_account\" \"immanent_changer\" {\n  email = \"immanent-changer@defn.us\"\n  name  = \"immanent-changer\"\n  tags = {\n    ManagedBy = \"Terraform\"\n  }\n}\n\nresource \"aws_ssoadmin_account_assignment\" \"immanent_changer_admin_sso_account_assignment\" {\n  instance_arn       = aws_ssoadmin_managed_policy_attachment.admin_sso_managed_policy_attachment.instance_arn\n  permission_set_arn = aws_ssoadmin_managed_policy_attachment.admin_sso_managed_policy_attachment.permission_set_arn\n  principal_id       = aws_identitystore_group.administrators_sso_group.group_id\n  principal_type     = \"GROUP\"\n  target_id          = aws_organizations_account.immanent_changer.id\n  target_type        = \"AWS_ACCOUNT\"\n}\nresource \"aws_organizations_account\" \"immanent_chanter\" {\n  email = \"immanent-chanter@defn.us\"\n  name  = \"immanent-chanter\"\n  tags = {\n    ManagedBy = \"Terraform\"\n  }\n}\n\nresource \"aws_ssoadmin_account_assignment\" \"immanent_chanter_admin_sso_account_assignment\" {\n  instance_arn       = aws_ssoadmin_managed_policy_attachment.admin_sso_managed_policy_attachment.instance_arn\n  permission_set_arn = aws_ssoadmin_managed_policy_attachment.admin_sso_managed_policy_attachment.permission_set_arn\n  principal_id       = aws_identitystore_group.administrators_sso_group.group_id\n  principal_type     = \"GROUP\"\n  target_id          = aws_organizations_account.immanent_chanter.id\n  target_type        = \"AWS_ACCOUNT\"\n}\nresource \"aws_organizations_account\" \"immanent_doorkeeper\" {\n  email = \"immanent-doorkeeper@defn.us\"\n  name  = \"immanent-doorkeeper\"\n  tags = {\n    ManagedBy = \"Terraform\"\n  }\n}\n\nresource \"aws_ssoadmin_account_assignment\" \"immanent_doorkeeper_admin_sso_account_assignment\" {\n  instance_arn       = aws_ssoadmin_managed_policy_attachment.admin_sso_managed_policy_attachment.instance_arn\n  permission_set_arn = aws_ssoadmin_managed_policy_attachment.admin_sso_managed_policy_attachment.permission_set_arn\n  principal_id       = aws_identitystore_group.administrators_sso_group.group_id\n  principal_type     = \"GROUP\"\n  target_id          = aws_organizations_account.immanent_doorkeeper.id\n  target_type        = \"AWS_ACCOUNT\"\n}\nresource \"aws_organizations_account\" \"immanent_ged\" {\n  email = \"immanent-ged@defn.us\"\n  name  = \"immanent-ged\"\n  tags = {\n    ManagedBy = \"Terraform\"\n  }\n}\n\nresource \"aws_ssoadmin_account_assignment\" \"immanent_ged_admin_sso_account_assignment\" {\n  instance_arn       = aws_ssoadmin_managed_policy_attachment.admin_sso_managed_policy_attachment.instance_arn\n  permission_set_arn = aws_ssoadmin_managed_policy_attachment.admin_sso_managed_policy_attachment.permission_set_arn\n  principal_id       = aws_identitystore_group.administrators_sso_group.group_id\n  principal_type     = \"GROUP\"\n  target_id          = aws_organizations_account.immanent_ged.id\n  target_type        = \"AWS_ACCOUNT\"\n}\nresource \"aws_organizations_account\" \"immanent_hand\" {\n  email = \"immanent-hand@defn.us\"\n  name  = \"immanent-hand\"\n  tags = {\n    ManagedBy = \"Terraform\"\n  }\n}\n\nresource \"aws_ssoadmin_account_assignment\" \"immanent_hand_admin_sso_account_assignment\" {\n  instance_arn       = aws_ssoadmin_managed_policy_attachment.admin_sso_managed_policy_attachment.instance_arn\n  permission_set_arn = aws_ssoadmin_managed_policy_attachment.admin_sso_managed_policy_attachment.permission_set_arn\n  principal_id       = aws_identitystore_group.administrators_sso_group.group_id\n  principal_type     = \"GROUP\"\n  target_id          = aws_organizations_account.immanent_hand.id\n  target_type        = \"AWS_ACCOUNT\"\n}\nresource \"aws_organizations_account\" \"immanent_herbal\" {\n  email = \"immanent-herbal@defn.us\"\n  name  = \"immanent-herbal\"\n  tags = {\n    ManagedBy = \"Terraform\"\n  }\n}\n\nresource \"aws_ssoadmin_account_assignment\" \"immanent_herbal_admin_sso_account_assignment\" {\n  instance_arn       = aws_ssoadmin_managed_policy_attachment.admin_sso_managed_policy_attachment.instance_arn\n  permission_set_arn = aws_ssoadmin_managed_policy_attachment.admin_sso_managed_policy_attachment.permission_set_arn\n  principal_id       = aws_identitystore_group.administrators_sso_group.group_id\n  principal_type     = \"GROUP\"\n  target_id          = aws_organizations_account.immanent_herbal.id\n  target_type        = \"AWS_ACCOUNT\"\n}\nresource \"aws_organizations_account\" \"immanent_namer\" {\n  email = \"immanent-namer@defn.us\"\n  name  = \"immanent-namer\"\n  tags = {\n    ManagedBy = \"Terraform\"\n  }\n}\n\nresource \"aws_ssoadmin_account_assignment\" \"immanent_namer_admin_sso_account_assignment\" {\n  instance_arn       = aws_ssoadmin_managed_policy_attachment.admin_sso_managed_policy_attachment.instance_arn\n  permission_set_arn = aws_ssoadmin_managed_policy_attachment.admin_sso_managed_policy_attachment.permission_set_arn\n  principal_id       = aws_identitystore_group.administrators_sso_group.group_id\n  principal_type     = \"GROUP\"\n  target_id          = aws_organizations_account.immanent_namer.id\n  target_type        = \"AWS_ACCOUNT\"\n}\nresource \"aws_organizations_account\" \"immanent_patterner\" {\n  email = \"immanent-patterner@defn.us\"\n  name  = \"immanent-patterner\"\n  tags = {\n    ManagedBy = \"Terraform\"\n  }\n}\n\nresource \"aws_ssoadmin_account_assignment\" \"immanent_patterner_admin_sso_account_assignment\" {\n  instance_arn       = aws_ssoadmin_managed_policy_attachment.admin_sso_managed_policy_attachment.instance_arn\n  permission_set_arn = aws_ssoadmin_managed_policy_attachment.admin_sso_managed_policy_attachment.permission_set_arn\n  principal_id       = aws_identitystore_group.administrators_sso_group.group_id\n  principal_type     = \"GROUP\"\n  target_id          = aws_organizations_account.immanent_patterner.id\n  target_type        = \"AWS_ACCOUNT\"\n}\nresource \"aws_organizations_account\" \"immanent_roke\" {\n  email = \"immanent-roke@defn.us\"\n  name  = \"immanent-roke\"\n  tags = {\n    ManagedBy = \"Terraform\"\n  }\n}\n\nresource \"aws_ssoadmin_account_assignment\" \"immanent_roke_admin_sso_account_assignment\" {\n  instance_arn       = aws_ssoadmin_managed_policy_attachment.admin_sso_managed_policy_attachment.instance_arn\n  permission_set_arn = aws_ssoadmin_managed_policy_attachment.admin_sso_managed_policy_attachment.permission_set_arn\n  principal_id       = aws_identitystore_group.administrators_sso_group.group_id\n  principal_type     = \"GROUP\"\n  target_id          = aws_organizations_account.immanent_roke.id\n  target_type        = \"AWS_ACCOUNT\"\n}\nresource \"aws_organizations_account\" \"immanent_summoner\" {\n  email = \"immanent-summoner@defn.us\"\n  name  = \"immanent-summoner\"\n  tags = {\n    ManagedBy = \"Terraform\"\n  }\n}\n\nresource \"aws_ssoadmin_account_assignment\" \"immanent_summoner_admin_sso_account_assignment\" {\n  instance_arn       = aws_ssoadmin_managed_policy_attachment.admin_sso_managed_policy_attachment.instance_arn\n  permission_set_arn = aws_ssoadmin_managed_policy_attachment.admin_sso_managed_policy_attachment.permission_set_arn\n  principal_id       = aws_identitystore_group.administrators_sso_group.group_id\n  principal_type     = \"GROUP\"\n  target_id          = aws_organizations_account.immanent_summoner.id\n  target_type        = \"AWS_ACCOUNT\"\n}\nresource \"aws_organizations_account\" \"immanent_windkey\" {\n  email = \"immanent-windkey@defn.us\"\n  name  = \"immanent-windkey\"\n  tags = {\n    ManagedBy = \"Terraform\"\n  }\n}\n\nresource \"aws_ssoadmin_account_assignment\" \"immanent_windkey_admin_sso_account_assignment\" {\n  instance_arn       = aws_ssoadmin_managed_policy_attachment.admin_sso_managed_policy_attachment.instance_arn\n  permission_set_arn = aws_ssoadmin_managed_policy_attachment.admin_sso_managed_policy_attachment.permission_set_arn\n  principal_id       = aws_identitystore_group.administrators_sso_group.group_id\n  principal_type     = \"GROUP\"\n  target_id          = aws_organizations_account.immanent_windkey.id\n  target_type        = \"AWS_ACCOUNT\"\n}\nmoved {\n  from = aws_organizations_account.immanent-org\n  to   = aws_organizations_account.immanent_org\n}\nmoved {\n  from = aws_organizations_account.immanent-changer\n  to   = aws_organizations_account.immanent_changer\n}\nmoved {\n  from = aws_organizations_account.immanent-chanter\n  to   = aws_organizations_account.immanent_chanter\n}\nmoved {\n  from = aws_organizations_account.immanent-doorkeeper\n  to   = aws_organizations_account.immanent_doorkeeper\n}\nmoved {\n  from = aws_organizations_account.immanent-ged\n  to   = aws_organizations_account.immanent_ged\n}\nmoved {\n  from = aws_organizations_account.immanent-hand\n  to   = aws_organizations_account.immanent_hand\n}\nmoved {\n  from = aws_organizations_account.immanent-herbal\n  to   = aws_organizations_account.immanent_herbal\n}\nmoved {\n  from = aws_organizations_account.immanent-namer\n  to   = aws_organizations_account.immanent_namer\n}\nmoved {\n  from = aws_organizations_account.immanent-patterner\n  to   = aws_organizations_account.immanent_patterner\n}\nmoved {\n  from = aws_organizations_account.immanent-roke\n  to   = aws_organizations_account.immanent_roke\n}\nmoved {\n  from = aws_organizations_account.immanent-summoner\n  to   = aws_organizations_account.immanent_summoner\n}\nmoved {\n  from = aws_organizations_account.immanent-windkey\n  to   = aws_organizations_account.immanent_windkey\n}\nmoved {\n  from = aws_ssoadmin_account_assignment.immanent-org_admin_sso_account_assignment\n  to   = aws_ssoadmin_account_assignment.immanent_org_admin_sso_account_assignment\n}\nmoved {\n  from = aws_ssoadmin_account_assignment.immanent-changer_admin_sso_account_assignment\n  to   = aws_ssoadmin_account_assignment.immanent_changer_admin_sso_account_assignment\n}\nmoved {\n  from = aws_ssoadmin_account_assignment.immanent-chanter_admin_sso_account_assignment\n  to   = aws_ssoadmin_account_assignment.immanent_chanter_admin_sso_account_assignment\n}\nmoved {\n  from = aws_ssoadmin_account_assignment.immanent-doorkeeper_admin_sso_account_assignment\n  to   = aws_ssoadmin_account_assignment.immanent_doorkeeper_admin_sso_account_assignment\n}\nmoved {\n  from = aws_ssoadmin_account_assignment.immanent-ged_admin_sso_account_assignment\n  to   = aws_ssoadmin_account_assignment.immanent_ged_admin_sso_account_assignment\n}\nmoved {\n  from = aws_ssoadmin_account_assignment.immanent-hand_admin_sso_account_assignment\n  to   = aws_ssoadmin_account_assignment.immanent_hand_admin_sso_account_assignment\n}\nmoved {\n  from = aws_ssoadmin_account_assignment.immanent-herbal_admin_sso_account_assignment\n  to   = aws_ssoadmin_account_assignment.immanent_herbal_admin_sso_account_assignment\n}\nmoved {\n  from = aws_ssoadmin_account_assignment.immanent-namer_admin_sso_account_assignment\n  to   = aws_ssoadmin_account_assignment.immanent_namer_admin_sso_account_assignment\n}\nmoved {\n  from = aws_ssoadmin_account_assignment.immanent-patterner_admin_sso_account_assignment\n  to   = aws_ssoadmin_account_assignment.immanent_patterner_admin_sso_account_assignment\n}\nmoved {\n  from = aws_ssoadmin_account_assignment.immanent-roke_admin_sso_account_assignment\n  to   = aws_ssoadmin_account_assignment.immanent_roke_admin_sso_account_assignment\n}\nmoved {\n  from = aws_ssoadmin_account_assignment.immanent-summoner_admin_sso_account_assignment\n  to   = aws_ssoadmin_account_assignment.immanent_summoner_admin_sso_account_assignment\n}\nmoved {\n  from = aws_ssoadmin_account_assignment.immanent-windkey_admin_sso_account_assignment\n  to   = aws_ssoadmin_account_assignment.immanent_windkey_admin_sso_account_assignment\n}", "infra_acc_readme": "## Account-specific Terraform: immanent-org\n\n```bash\ncd infra/acc-immanent-org\nmise trust\naws sso login --profile defn-org\naws sso login\nterraform init\nterraform plan\n```\n\nauto-generated: aws.cue infra_acc_readme", "infra_acc_terraform": "terraform {\n  required_providers {\n    aws = {\n      version = \"5.99.1\"\n      source  = \"aws\"\n    }\n  }\n  backend \"s3\" {\n    bucket         = \"dfn-defn-terraform-state\"\n    dynamodb_table = \"dfn-defn-terraform-state-lock\"\n    encrypt        = true\n    key            = \"stacks/acc-immanent-org/terraform.tfstate\"\n    profile        = \"defn-org\"\n    region         = \"us-east-1\"\n  }\n\n}\n\nprovider \"aws\" {\n  profile = \"immanent-org\"\n  region  = \"us-east-1\"\n  alias   = \"immanent-org\"\n}\n\nmodule \"immanent-org\" {\n  account   = 510430971399\n  name      = \"terraform\"\n  namespace = \"immanent\"\n  stage     = \"ops\"\n  source    = \"./mod/terraform-aws-defn-account\"\n  providers = {\n    aws = aws.immanent-org\n  }\n}"}
