pid /dev/null;

events {
    worker_connections 1024;
}

http {
    server {
        listen 3001;

        location = / {
            return 302 https://$host/pub/w/g/;
        }

        location / {
            proxy_pass http://127.0.0.1:8111;
            proxy_set_header Host              $host;
            proxy_set_header X-Real-IP         $remote_addr;
            proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto http;
            proxy_redirect http://$host:3001/ https://$host/;
        }
    }

    access_log /tmp/access.log;
    error_log /tmp/error.log warn;
}
