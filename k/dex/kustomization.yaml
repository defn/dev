namespace: dex

helmCharts:
- releaseName: dex
  name: dex
  version: 0.9.0
  repo: https://charts.dexidp.io
  includeCRDs: true
  valuesInline:
    config:
      issuer: https://dex.remocal.net
      storage:
        type: memory
      enablePasswordDB: true
      staticPasswords:
        - email: iam@defn.sh
          username: admin
          userid: "123456789"
          hash: "$2a$10$2b2cU8CPhOTaGrs1HRQuAueS7JTT5ZHsHSzYiFPm1leZck7Mc8T4W"
      web:
        http: 0.0.0.0:5556
      connectors:
      - name: GitHub
        type: github
        id: github
        config:
          clientID: GITHUB_CLIENT_ID
          clientSecret: GITHUB_CLIENT_SECRET
          redirectURI: http://localhost:5556/callback
      oauth2:
        skipApprovalScreen: true
      staticClients:
      - name: Traefik Forward Auth
        id: forward-auth
        secret: 6bbc3f2a6d55a3917e068dff5b07a476
        redirectURIs:
        - https://auth.remocal.net/_oauth


resources:
- ingress.yaml
